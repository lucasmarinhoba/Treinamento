import pygame 
import sys

# Inicializa o Pygame
pygame.init()

# Fonte
fonte_regras = pygame.font.Font("adventure.otf", 24)  # Tamanho menor para o texto das regras
fonte_adventure = pygame.font.Font("adventure.otf", 35)  # Aumenta o tamanho da fonte
# Configura a janela inicial (tamanho normal)
screen = pygame.display.set_mode((600, 600))  # Tamanho da janela original
pygame.display.set_caption("Indiana Jones e a Caça ao Tesouro")

# Cores
BRANCO = (255, 255, 255)
PRETO = (0, 0, 0)
AMARELO = (255, 204, 0)
VERMELHO = (255, 0, 0)

# Carregar imagens no formato JPEG
imagem_fundo = pygame.image.load("indiana.png")  # Imagem de fundo
imagem_fundo = pygame.transform.scale(imagem_fundo, (640, 400))  # Ajusta o tamanho da imagem

# Posições do texto
pos_iniciar = (180, 260)  # Aumenta a posição 'y' do texto "Iniciar Jogo"
pos_regras = (220, 300)  # Posição do texto "Regras"
pos_sair = (20, 350)  # Posição do texto "Sair"


# Função para exibir a imagem de introdução por 5 segundos
def mostrar_intro():
    imagem_intro = pygame.image.load("telainicial.png")  # Imagem de introdução
    imagem_intro = pygame.transform.scale(imagem_intro, (600, 400))  # Ajusta o tamanho da imagem para 600x400
    screen = pygame.display.set_mode((600, 400))  # Redimensiona a janela para o tamanho da imagem

    # Limpa a tela com a cor preta
    screen.fill((0, 0, 0))  # Cor preta

    # Desenha a imagem na tela
    screen.blit(imagem_intro, (0, 0))  # Desenha a imagem na tela
    pygame.display.flip()  # Atualiza a tela para mostrar a tela preta e a imagem simultaneamente

    pygame.time.delay(5000)  # Aguarda 5 segundos

    # Retorna ao tamanho original da janela
    screen = pygame.display.set_mode((600, 400))  # Retorna ao tamanho original
    pygame.display.set_caption("Início")  # Atualiza o título

# Função para desenhar o menu
# Função para desenhar o menu
def desenhar_menu():
    screen.blit(imagem_fundo, (0, 0))  # Desenha a imagem de fundo
    
    # Renderiza o texto "Iniciar Jogo" com gradiente
    texto_iniciar = "Iniciar Jogo"
    largura_iniciar = fonte_adventure.size(texto_iniciar)[0]  # Obtém a largura do texto
    pos_iniciar = ((600 - largura_iniciar) // 2, 260)  # Centraliza no eixo x
    texto_renderizado_iniciar = render_gradient_text(texto_iniciar, fonte_adventure, (255, 0, 0), (255, 255, 0))
    screen.blit(texto_renderizado_iniciar, pos_iniciar)  # Desenha o texto "Iniciar Jogo"

    # Renderiza o texto "Regras" com gradiente
    texto_regras = "Regras"
    largura_regras = fonte_adventure.size(texto_regras)[0]  # Obtém a largura do texto
    pos_regras = ((600 - largura_regras) // 2, 300)  # Centraliza no eixo x
    texto_renderizado_regras = render_gradient_text(texto_regras, fonte_adventure, (255, 0, 0), (255, 255, 0))
    screen.blit(texto_renderizado_regras, pos_regras)  # Desenha o texto "Regras"

    # Renderiza o texto "Sair" com gradiente
    texto_sair = "Sair"
    pos_sair = (20, 350)  # Mantém a posição original de "Sair"
    texto_renderizado_sair = render_gradient_text(texto_sair, fonte_adventure, (255, 0, 0), (255, 255, 0))
    screen.blit(texto_renderizado_sair, pos_sair)  # Desenha o texto "Sair"

    pygame.display.flip()

# Carregar a imagem da tela de regras
imagem_tela_regras = pygame.image.load("telaregras2.png")
imagem_tela_regras = pygame.transform.scale(imagem_tela_regras, (600, 400))  # Ajusta o tamanho da imagem

def desenhar_regras():
    screen.blit(imagem_tela_regras, (0, 0))  # Desenha a imagem de fundo das regras
    linhas_regras = [
        "1 - O jogo é PvP;",
        "2 - Cada tesouro vale 100 pontos;",
        "3 - Ao cair no buraco, o jogador perde 50 pontos;",
        "4 - O jogo termina quando todas as casas são reveladas;",
        "5 - Vence quem tiver maior pontuação."
    ]
    
    y_offset = 50  # Posição inicial vertical
    for linha in linhas_regras:
        # Renderiza o texto com gradiente vertical
        linha_renderizada = render_gradient_text(linha, fonte_regras, (255, 0, 0), (255, 255, 0))  
        screen.blit(linha_renderizada, (20, y_offset))  # Desenha na tela
        y_offset += 60  # Ajuste o espaçamento entre as linhas

    # Renderiza o texto "Retornar" com gradiente
    texto_retornar = render_gradient_text("Retornar", fonte_adventure, (255, 0, 0), (255, 255, 0))
    screen.blit(texto_retornar, (250, 350))  # Texto "Retornar"
    pygame.display.flip()

# Função para renderizar o texto com gradiente vertical
def render_gradient_text(text, font, start_color, end_color):
    text_surface = font.render(text, True, (255, 255, 255))  # Renderizamos o texto normalmente
    width, height = text_surface.get_size()
    
    # Criar uma superfície para o gradiente
    gradient_surface = pygame.Surface((width, height), pygame.SRCALPHA)
    
    # Aplicar o gradiente linha por linha
    for y in range(height):
        color_factor = y / height  # Fator de gradiente para cada linha
        color = interpolate_color(start_color, end_color, color_factor)
        
        # Criar uma linha horizontal da cor interpolada
        pygame.draw.line(gradient_surface, color, (0, y), (width, y))
    
    # Colocar o texto renderizado na superfície com gradiente
    text_surface.blit(gradient_surface, (0, 0), special_flags=pygame.BLEND_RGBA_MULT)
    
    return text_surface

# Função para interpolar as cores
def interpolate_color(color1, color2, factor):
    return (
        int(color1[0] + (color2[0] - color1[0]) * factor),
        int(color1[1] + (color2[1] - color1[1]) * factor),
        int(color1[2] + (color2[2] - color1[2]) * factor),
    )

# Função para verificar eventos no menu
def verificar_eventos_menu():
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
            sys.exit()
        if event.type == pygame.MOUSEBUTTONDOWN:
            if pos_iniciar[0] < event.pos[0] < pos_iniciar[0] + 180 and \
               pos_iniciar[1] < event.pos[1] < pos_iniciar[1] + 30:  # Verifica o texto "Iniciar Jogo"
                print("Iniciar Jogo!")  # Aqui você pode substituir pela lógica de iniciar o jogo
                return "iniciar"  # Inicia o jogo
            if pos_regras[0] < event.pos[0] < pos_regras[0] + 100 and \
               pos_regras[1] < event.pos[1] < pos_regras[1] + 30:  # Verifica o texto "Regras"
                print("Ler Regras!")  # Exibe as regras
                return "regras"  # Vai para as regras
            if pos_sair[0] < event.pos[0] < pos_sair[0] + 100 and \
               pos_sair[1] < event.pos[1] < pos_sair[1] + 30:  # Verifica o texto "Sair"
                print("Saindo do jogo!")  # Aqui você pode substituir pela lógica de sair do jogo
                pygame.quit()  # Fecha o Pygame
                sys.exit()  # Sai do sistema
    return None

# Função para verificar eventos nas regras
def verificar_eventos_regras():
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
            sys.exit()
        if event.type == pygame.MOUSEBUTTONDOWN:
            # Ajustar a lógica para a nova posição do texto "Retornar"
            if 250 < event.pos[0] < 400 and 350 < event.pos[1] < 400:
                print("Retornar ao menu principal")
                return "menu"  # Retorna ao menu principal
    return None

# Função principal
def main():
    mostrar_intro()  # Exibe a tela de introdução

    while True:
        desenhar_menu()  # Desenha o menu

        acao = verificar_eventos_menu()  # Verifica eventos no menu
        if acao == "iniciar":
            # Aqui você pode adicionar a lógica para iniciar o jogo
            pass
        elif acao == "regras":
            while True:
                desenhar_regras()  # Desenha as regras
                acao_regras = verificar_eventos_regras()  # Verifica eventos nas regras
                if acao_regras == "menu":
                    break  # Retorna ao menu principal

# Executa o programa principal
if __name__ == "__main__":
    main()
